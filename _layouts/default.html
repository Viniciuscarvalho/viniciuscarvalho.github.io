<!DOCTYPE html>
<html lang="{{ site.plainwhite.html_lang | default: "pt-br" }}">

<head>
  {%- include head.html -%}
</head>

<body>
  {%- include nav.html -%}

  <main id="main-content" class="container-page py-12">
    {{ content }}
  </main>

  {%- include footer.html -%}

  <script>
    (function () {
      // Mobile nav toggle
      var toggle = document.getElementById("nav-toggle");
      var mobileNav = document.getElementById("mobile-nav");
      if (toggle && mobileNav) {
        toggle.addEventListener("click", function () {
          var isOpen = !mobileNav.classList.contains("hidden");
          if (isOpen) {
            mobileNav.classList.add("hidden");
            toggle.setAttribute("aria-expanded", "false");
          } else {
            mobileNav.classList.remove("hidden");
            toggle.setAttribute("aria-expanded", "true");
          }
        });
      }

      // Nav border on scroll
      var nav = document.getElementById("site-nav");
      if (nav) {
        window.addEventListener("scroll", function () {
          if (window.scrollY > 10) {
            nav.classList.add("border-border", "shadow-nav");
            nav.classList.remove("border-transparent");
          } else {
            nav.classList.remove("border-border", "shadow-nav");
            nav.classList.add("border-transparent");
          }
        }, { passive: true });
      }

      // Reveal on scroll
      var reveals = document.querySelectorAll(".reveal");
      if (reveals.length > 0) {
        var observer = new IntersectionObserver(function (entries) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1, rootMargin: "0px 0px -40px 0px" });
        reveals.forEach(function (el) { observer.observe(el); });
      }
    })();
  </script>

  {%- if site.plainwhite.analytics_id -%}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.plainwhite.analytics_id }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', '{{ site.plainwhite.analytics_id }}');
  </script>
  {%- endif -%}

  {% if site.plainwhite.search %}
  <script src="{{ "/assets/js/simple-jekyll-search.min.js" | relative_url }}"></script>
  <script src="{{ "/assets/js/search.js" | relative_url }}"></script>
  {% endif %}
</body>

</html>
